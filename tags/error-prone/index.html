<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>error-prone | Code Smells for Machine Learning Applications</title><meta name=keywords content><meta name=description content="The popularity of machine learning has wildly expanded in recent years. Machine learning techniques have been heatedly studied in academia and applied in the industry to create business value. However, there is a lack of guidelines for code quality in machine learning applications. In particular, code smells have rarely been studied in this domain. Although machine learning code is usually integrated as a small part of an overarching system, it usually plays an important role in its core functionality. Hence ensuring code quality is quintessential to avoid issues in the long run. This paper proposes and identifies a list of 22 machine learning-specific code smells collected from various sources, including papers, grey literature, GitHub commits, and Stack Overflow posts. We pinpoint each smell with a description of its context, potential issues in the long run, and proposed solutions. In addition, we link them to their respective pipeline stage and the evidence from both academic and grey literature. The code smell catalog helps data scientists and developers produce and maintain high-quality machine learning application code."><meta name=author content><link rel=canonical href=https://hynn01.github.io/ml-smells/tags/error-prone/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/ml-smells/assets/css/stylesheet.min.7562f2f4c1c0f34ea6add27a32f5b2afe3d35c8ca1c2a71e389ffe4cbae1859b.css integrity="sha256-dWLy9MHA806mrdJ6MvWyr+PTXIyhwqceOJ/+TLrhhZs=" rel="preload stylesheet" as=style><link rel=icon href=https://hynn01.github.io/ml-smells/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://hynn01.github.io/ml-smells/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://hynn01.github.io/ml-smells/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://hynn01.github.io/ml-smells/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://hynn01.github.io/ml-smells/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.101.0"><link rel=alternate type=application/rss+xml href=https://hynn01.github.io/ml-smells/tags/error-prone/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="error-prone"><meta property="og:description" content="The popularity of machine learning has wildly expanded in recent years. Machine learning techniques have been heatedly studied in academia and applied in the industry to create business value. However, there is a lack of guidelines for code quality in machine learning applications. In particular, code smells have rarely been studied in this domain. Although machine learning code is usually integrated as a small part of an overarching system, it usually plays an important role in its core functionality. Hence ensuring code quality is quintessential to avoid issues in the long run. This paper proposes and identifies a list of 22 machine learning-specific code smells collected from various sources, including papers, grey literature, GitHub commits, and Stack Overflow posts. We pinpoint each smell with a description of its context, potential issues in the long run, and proposed solutions. In addition, we link them to their respective pipeline stage and the evidence from both academic and grey literature. The code smell catalog helps data scientists and developers produce and maintain high-quality machine learning application code."><meta property="og:type" content="website"><meta property="og:url" content="https://hynn01.github.io/ml-smells/tags/error-prone/"><meta property="og:site_name" content="Code Smells for Machine Learning Applications"><meta name=twitter:card content="summary"><meta name=twitter:title content="error-prone"><meta name=twitter:description content="The popularity of machine learning has wildly expanded in recent years. Machine learning techniques have been heatedly studied in academia and applied in the industry to create business value. However, there is a lack of guidelines for code quality in machine learning applications. In particular, code smells have rarely been studied in this domain. Although machine learning code is usually integrated as a small part of an overarching system, it usually plays an important role in its core functionality. Hence ensuring code quality is quintessential to avoid issues in the long run. This paper proposes and identifies a list of 22 machine learning-specific code smells collected from various sources, including papers, grey literature, GitHub commits, and Stack Overflow posts. We pinpoint each smell with a description of its context, potential issues in the long run, and proposed solutions. In addition, we link them to their respective pipeline stage and the evidence from both academic and grey literature. The code smell catalog helps data scientists and developers produce and maintain high-quality machine learning application code."></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://hynn01.github.io/ml-smells/ accesskey=h title="Code Smells for Machine Learning Applications (Alt + H)">Code Smells for Machine Learning Applications</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://hynn01.github.io/ml-smells/posts/codesmells/ title="Code Smells"><span>Code Smells</span></a></li><li><a href=https://hynn01.github.io/ml-smells/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://hynn01.github.io/ml-smells/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://hynn01.github.io/ml-smells/>Home</a>&nbsp;Â»&nbsp;<a href=https://hynn01.github.io/ml-smells/tags/>Tags</a></div><h1>error-prone</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2>NaN Equivalence Comparison Misused</h2></header><section class=entry-content><p>Be careful when using the NaN equivalence comparison in NumPy and Pandas.</p></section><footer class=entry-footer></footer><a class=entry-link aria-label="post link to NaN Equivalence Comparison Misused" href=https://hynn01.github.io/ml-smells/posts/codesmells/2-nan-equivalence-comparison-misused/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Chain Indexing</h2></header><section class=entry-content><p>Avoid using chain indexing in Pandas.</p></section><footer class=entry-footer></footer><a class=entry-link aria-label="post link to Chain Indexing" href=https://hynn01.github.io/ml-smells/posts/codesmells/3-chain-indexing/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Merge API Parameter Not Explicitly Set</h2></header><section class=entry-content><p>Explicitly specify on, how and validate parameter for df.merge() API in Pandas for better readability.</p></section><footer class=entry-footer></footer><a class=entry-link aria-label="post link to Merge API Parameter Not Explicitly Set" href=https://hynn01.github.io/ml-smells/posts/codesmells/6-merge-api-parameter-not-explicitly-set/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>In-Place APIs Misused</h2></header><section class=entry-content><p>Remember to assign the result of an operation to a variable or set the in-place parameter in the API.</p></section><footer class=entry-footer></footer><a class=entry-link aria-label="post link to In-Place APIs Misused" href=https://hynn01.github.io/ml-smells/posts/codesmells/7-in-place-apis-misused/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Dataframe Conversion API Misused</h2></header><section class=entry-content><p>Use df.to_numpy() in Pandas instead of df.values() for transform a DataFrame to a NumPy array.</p></section><footer class=entry-footer></footer><a class=entry-link aria-label="post link to Dataframe Conversion API Misused" href=https://hynn01.github.io/ml-smells/posts/codesmells/8-dataframe-coversion-api-misused/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>No Scaling Before Scaling-sensitive Operation</h2></header><section class=entry-content><p>Check whether feature scaling is added before scaling-sensitive operations.</p></section><footer class=entry-footer></footer><a class=entry-link aria-label="post link to No Scaling Before Scaling-sensitive Operation" href=https://hynn01.github.io/ml-smells/posts/codesmells/10-no-scaling-before-scaling-sensitive-operation/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Hyperparameter not Explicitly Set</h2></header><section class=entry-content><p>Hyperparameters should be set explicitly.</p></section><footer class=entry-footer></footer><a class=entry-link aria-label="post link to Hyperparameter not Explicitly Set" href=https://hynn01.github.io/ml-smells/posts/codesmells/11-hyperparameter-not-explicitly-set/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Missing the Mask of Invalid Value</h2></header><section class=entry-content><p>Add a mask for possible invalid values. For example, developers should add a mask for the input for tf.log() API.</p></section><footer class=entry-footer></footer><a class=entry-link aria-label="post link to Missing the Mask of Invalid Value" href=https://hynn01.github.io/ml-smells/posts/codesmells/15-missing-the-mask-of-invalid-value/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>TensorArray Not Used</h2></header><section class=entry-content><p>Use tf.TensorArray() in TensorFlow 2 if the value of the array will change in the loop.</p></section><footer class=entry-footer></footer><a class=entry-link aria-label="post link to TensorArray Not Used" href=https://hynn01.github.io/ml-smells/posts/codesmells/17-tensorarray-not-used/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Training / Evaluation Mode Improper Toggling</h2></header><section class=entry-content><p>Call the training mode in the appropriate place in PyTorch code to avoid forgetting to toggle back the training mode after the inference step.</p></section><footer class=entry-footer></footer><a class=entry-link aria-label="post link to Training / Evaluation Mode Improper Toggling" href=https://hynn01.github.io/ml-smells/posts/codesmells/18-training-evaluation-mode-improper-toggling/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Gradients Not Cleared before Backward Propagation</h2></header><section class=entry-content><p>Use optimizer.zero_grad(), loss_fn.backward(), optimizer.step() together in order in PyTorch. Do not forget to use optimizer.zero_grad() before loss_fn.backward() to clear gradients.</p></section><footer class=entry-footer></footer><a class=entry-link aria-label="post link to Gradients Not Cleared before Backward Propagation" href=https://hynn01.github.io/ml-smells/posts/codesmells/20-gradients-not-cleared-before-backward-propagation/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Data Leakage</h2></header><section class=entry-content><p>Use Pipeline() API in Scikit-Learn or check data segregation carefully when using other libraries to prevent data leakage.</p></section><footer class=entry-footer></footer><a class=entry-link aria-label="post link to Data Leakage" href=https://hynn01.github.io/ml-smells/posts/codesmells/21-data-leakage/></a></article></main><footer class=footer><span>&copy; 2022 <a href=https://hynn01.github.io/ml-smells/>Code Smells for Machine Learning Applications</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>